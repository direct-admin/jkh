(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1224:function(e,t,s){"use strict";s.r(t);var a=s(2169),l=s(1565);for(var i in l)"default"!==i&&function(e){s.d(t,e,function(){return l[e]})}(i);var n=s(0),r=s(2411),o=s.n(r),u=Object(n.a)(l.default,a.a,a.b,!1,null,null,null);"function"==typeof o.a&&o()(u),t.default=u.exports},1564:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(s(11)),l=o(s(10)),i=o(s(3)),n=s(7),r=s(6);function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)({},(0,n.preload)("GET_SPAMASSASSIN_INFO"),{data:function(){return{values:r._.cloneDeep(this.initialValues),newBlacklistEmail:"",newWhitelistEmail:""}},computed:(0,n.mapResponse)({GET_SPAMASSASSIN_INFO:{enabled:"enabled",initialValues:"values"}}),methods:{reloadSettings:function(){this.$request("GET_SPAMASSASSIN_INFO")},checkUniqueness:function(e){var t=this;return function(s){return!t.values[e].includes(s)}},disableSpamAssassin:function(){var e=this;return(0,l.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("DISABLE_SPAMASSASSIN");case 2:t.sent&&e.reloadSettings();case 4:case"end":return t.stop()}},t,e)}))()},enableSpamAssassin:function(){var e=this;return(0,l.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("ENABLE_SPAMASSASSIN");case 2:if(!t.sent){t.next=4;break}e.reloadSettings();case 4:case"end":return t.stop()}},t,e)}))()},addToList:function(e,t){this.values[e].push(this.$p6e.email2ascii(t)),t=""},removeFromList:function(e,t){this.values[e]=this.values[e].filter(function(e){return e!==t})},saveValues:function(){this.$actionRequest("UPDATE_SPAMASSASSIN",{domain:this.domain,values:this.values})},deleteBayesData:function(){this.$actionRequest("DELETE_SPAMASSASSIN_BAYES_DATA")}},created:function(){var e=this;this.values=r._.cloneDeep(this.initialValues),this.$watch("values.required_hits",function(t,s){"custom"===t&&(e.values.required_hits_custom=s)})}})},1565:function(e,t,s){"use strict";s.r(t);var a=s(1564),l=s.n(a);for(var i in a)"default"!==i&&function(e){s.d(t,e,function(){return a[e]})}(i);t.default=l.a},2169:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("template",{slot:"header:buttons"},[e.enabled?s("ui-button",{attrs:{theme:"primary"},on:{click:e.disableSpamAssassin}},[s("translate",[e._v("Disable SpamAssassin")])],1):e._e()],1),e._v(" "),e.enabled?s("app-page-section",[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Where do you want the spam to go?\n            ")]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-check",{attrs:{type:"radio",value:"inbox"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[s("translate",[e._v("Inbox (don't block it)")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"spamfolder"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[s("translate",[e._v("Redirect it to the catch-all spam folder in your main IMAP acount")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"userspamfolder"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[s("translate",[e._v("Send the spam to the user's spam folder")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"delete"},model:{value:e.values.where,callback:function(t){e.$set(e.values,"where",t)},expression:"values.where"}},[s("translate",[e._v("Delete the spam")])],1)],1)],1),e._v(" "),s("ui-form-element",[s("div",{attrs:{slot:"title"},slot:"title"},[s("translate",[e._v("\n                    What score threshold do you wish to use?\n                ")]),e._v(" "),s("ui-tooltip",[s("translate",[e._v("A lower threshold will block more spam, but can potentially tag legitimate mail.")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("A higher threshold will let more spam through, but is less likely to tag legitimate mail.")])],1)],1),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-check",{attrs:{type:"radio",value:"5.0"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[s("translate",[e._v("Low Threshold (5.0)")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"7.5"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[s("translate",[e._v("Medium Threshold (7.5)")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"10.0"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[s("translate",[e._v("High Threshold (10.0)")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"custom"},model:{value:e.values.required_hits,callback:function(t){e.$set(e.values,"required_hits",t)},expression:"values.required_hits"}},[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:e.$_Client.isPhone?"start":"center",dir:e.$_Client.isPhone?"column":"row"},expression:"{\n                            cross: $_Client.isPhone ? 'start' : 'center',\n                            dir: $_Client.isPhone ? 'column' : 'row'\n                        }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[s("translate",[e._v("Custom Threshold")]),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("input-text",{attrs:{number:"float"},model:{value:e.values.required_hits_custom,callback:function(t){e.$set(e.values,"required_hits_custom",t)},expression:"values.required_hits_custom"}})],1)],1)])],1)]),e._v(" "),s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Would you like to delete high scoring spam?\n            ")]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-check",{attrs:{type:"radio",value:"yes"},model:{value:e.values.high_score_block,callback:function(t){e.$set(e.values,"high_score_block",t)},expression:"values.high_score_block"}},[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:e.$_Client.isPhone?"start":"center",dir:e.$_Client.isPhone?"column":"row"},expression:"{\n                            cross: $_Client.isPhone ? 'start' : 'center',\n                            dir: $_Client.isPhone ? 'column' : 'row'\n                        }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[s("translate",[e._v("Yes, block all spam scoring higher than:")]),e._v(" "),s("ui-input-group",[s("input-text",{attrs:{slot:"input",number:""},slot:"input",model:{value:e.values.high_score,callback:function(t){e.$set(e.values,"high_score",t)},expression:"values.high_score"}}),e._v(" "),s("ui-tooltip",{attrs:{slot:"additions:right"},slot:"additions:right"},[s("ui-button",{attrs:{slot:"trigger",disabled:""},slot:"trigger"},[s("ui-icon",{attrs:{id:"question",theme:"neutral",size:"medium3"}})],1),e._v(" "),s("translate",[e._v("1-50, no decimals")])],1)],1)],1)]),e._v(" "),s("input-check",{attrs:{type:"radio",value:"no"},model:{value:e.values.high_score_block,callback:function(t){e.$set(e.values,"high_score_block",t)},expression:"values.high_score_block"}},[s("translate",[e._v("No, do not block high scoring spam. Use only the threshold in the previous section.")])],1)],1)],1),e._v(" "),s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Do you wish to rewrite the subject of a spam e-mail?\n            ")]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-check",{attrs:{type:"radio",value:"1"},model:{value:e.values.rewrite_subject,callback:function(t){e.$set(e.values,"rewrite_subject",t)},expression:"values.rewrite_subject"}},[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:e.$_Client.isPhone?"start":"center",dir:e.$_Client.isPhone?"column":"row"},expression:"{\n                            cross: $_Client.isPhone ? 'start' : 'center',\n                            dir: $_Client.isPhone ? 'column' : 'row'\n                        }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[s("translate",[e._v("Yes, set the subject to the following:")]),e._v(" "),s("input-text",{model:{value:e.values.subject_tag,callback:function(t){e.$set(e.values,"subject_tag",t)},expression:"values.subject_tag"}})],1)]),e._v(" "),s("input-check",{attrs:{type:"radio",value:"0"},model:{value:e.values.rewrite_subject,callback:function(t){e.$set(e.values,"rewrite_subject",t)},expression:"values.rewrite_subject"}},[s("translate",[e._v("No, leave the subject unchanged.")])],1)],1)],1),e._v(" "),s("ui-form-element",[s("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n                How should the spam be delivered?\n                "),s("ui-tooltip",[s("translate",[e._v("Attachments will seperate the spam into its own message, preventing scripts from being run.")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("Text-only attachements are used for increased safety.")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("Not using attachments will leave the spam unaltered except for spam headers.")])],1)],1),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-check",{attrs:{type:"radio",value:"0"},model:{value:e.values.report_safe,callback:function(t){e.$set(e.values,"report_safe",t)},expression:"values.report_safe"}},[s("translate",[e._v("Don't use attachments (dangerous).")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"1"},model:{value:e.values.report_safe,callback:function(t){e.$set(e.values,"report_safe",t)},expression:"values.report_safe"}},[s("translate",[e._v("Use attachments.")])],1),e._v(" "),s("input-check",{attrs:{type:"radio",value:"2"},model:{value:e.values.report_safe,callback:function(t){e.$set(e.values,"report_safe",t)},expression:"values.report_safe"}},[s("translate",[e._v("Use text-only attachments.")])],1)],1)]),e._v(" "),s("ui-form-element",[s("div",{attrs:{slot:"title"},slot:"title"},[s("translate",[e._v("E-mail Blacklist")]),e._v(" "),s("ui-tooltip",[s("translate",[e._v("\n                        This is the list of e-mail address that will be blocked.\n                    ")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("\n                        Any e-mail from these addresses will automatically be tagged as spam.\n                    ")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("\n                        eg: *@domain.com\n                    ")])],1)],1),e._v(" "),s("ui-table",e._b({attrs:{slot:"content",hideBeforeControls:""},slot:"content",scopedSlots:e._u([{key:"col:delete-action",fn:function(t){var a=t.item;return[s("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(t){e.removeFromList("blacklist_from",a.email)}}},[s("translate",[e._v("Remove")])],1)]}},{key:"col:email",fn:function(t){var s=t.email;return[e._v("\n                    "+e._s(e._f("p6e-unicode-email")(s))+"\n                ")]}}])},"ui-table",{rows:e.values.blacklist_from.map(function(e){return{email:e}}),columns:[{id:"email",label:e.$gettext("Blocked E-mail")},{id:"delete-action"}],isCheckable:!1},!1),[s("ui-form-element",{attrs:{slot:"table:after",vertical:"",group:"blacklist",validators:{required:!0,email:!0,unique:e.checkUniqueness("blacklist_from"),oppositeUnique:e.checkUniqueness("whitelist_from")}},slot:"table:after"},[s("ui-input-group",{attrs:{slot:"content"},slot:"content"},[s("input-text",{attrs:{slot:"input"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$valid("blacklist")&&e.addToList("blacklist_from",e.newBlacklistEmail)&&(e.newBlacklistEmail="")}},slot:"input",model:{value:e.newBlacklistEmail,callback:function(t){e.newBlacklistEmail=t},expression:"newBlacklistEmail"}}),e._v(" "),s("ui-button",{attrs:{slot:"additions:right",theme:"safe",icon:"plus-fill",validateGroup:"blacklist"},on:{click:function(t){e.addToList("blacklist_from",e.newBlacklistEmail),e.newBlacklistEmail=""}},slot:"additions:right"},[s("translate",[e._v("Add")])],1)],1),e._v(" "),s("translate",{attrs:{slot:"error:email"},slot:"error:email"},[e._v("\n                        Should be valid email\n                    ")]),e._v(" "),s("translate",{attrs:{slot:"error:unique"},slot:"error:unique"},[e._v("\n                        Already in the list\n                    ")]),e._v(" "),s("translate",{attrs:{slot:"error:oppositeUnique"},slot:"error:oppositeUnique"},[e._v("\n                        Already whitelisted\n                    ")])],1)],1)],1),e._v(" "),s("ui-form-element",[s("div",{attrs:{slot:"title"},slot:"title"},[s("translate",[e._v("E-mail Whitelist")]),e._v(" "),s("ui-tooltip",[s("translate",[e._v("\n                        This is the list of e-mail address that will be allowed through, regardless of content.\n                    ")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("\n                        The format is the same as the E-mail Blacklist\n                    ")])],1)],1),e._v(" "),s("ui-table",e._b({attrs:{slot:"content"},slot:"content",scopedSlots:e._u([{key:"col:email",fn:function(t){var s=t.email;return[e._v("\n                    "+e._s(e._f("p6e-unicode-email")(s))+"\n                ")]}},{key:"col:delete-action",fn:function(t){var a=t.item;return s("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(t){e.removeFromList("whitelist_from",a.email)}}},[s("translate",[e._v("Remove")])],1)}}])},"ui-table",{rows:e.values.whitelist_from.map(function(e){return{email:e}}),columns:[{id:"email",label:e.$gettext("Whitelisted E-mail")},{id:"delete-action"}],isCheckable:!1,hideBeforeControls:!0},!1),[s("ui-form-element",{attrs:{slot:"table:after",vertical:"",group:"whitelist",validators:{required:!0,email:!0,unique:e.checkUniqueness("whitelist_from"),oppositeUnique:e.checkUniqueness("blacklist_from")}},slot:"table:after"},[s("ui-input-group",{attrs:{slot:"content"},slot:"content"},[s("input-text",{attrs:{slot:"input"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$valid("whitelist")&&e.addToList("whitelist_from",e.newWhitelistEmail)&&(e.newWhitelistEmail="")}},slot:"input",model:{value:e.newWhitelistEmail,callback:function(t){e.newWhitelistEmail=t},expression:"newWhitelistEmail"}}),e._v(" "),s("ui-button",{attrs:{slot:"additions:right",theme:"safe",icon:"plus-fill",validateGroup:"whitelist"},on:{click:function(t){e.addToList("whitelist_from",e.newWhitelistEmail),e.newWhitelistEmail=""}},slot:"additions:right"},[s("translate",[e._v("Add")])],1)],1),e._v(" "),s("translate",{attrs:{slot:"error:email"},slot:"error:email"},[e._v("\n                        Should be valid email\n                    ")]),e._v(" "),s("translate",{attrs:{slot:"error:unique"},slot:"error:unique"},[e._v("\n                        Already in the list\n                    ")]),e._v(" "),s("translate",{attrs:{slot:"error:oppositeUnique"},slot:"error:oppositeUnique"},[e._v("\n                        Already blacklisted\n                    ")])],1)],1)],1)],1):s("app-page-section",[s("translate",[e._v("SpamAssassin is not currently enabled.")])],1),e._v(" "),s("template",{slot:"footer:buttons"},[e.enabled?[s("ui-button",{attrs:{theme:"safe"},on:{click:e.saveValues}},[s("translate",[e._v("Save")])],1),e._v(" "),s("ui-tooltip",{attrs:{position:"left"}},[s("ui-button",{attrs:{slot:"trigger",theme:"danger"},on:{click:e.deleteBayesData},slot:"trigger"},[s("translate",[e._v("Delete Bayes Data")])],1),e._v(" "),s("translate",[e._v("\n                    This button will remove data learned by spamassassin.\n                ")]),e._v(" "),s("br"),e._v(" "),s("translate",[e._v("\n                    It will free up some space, but will reset any learned progress SpamAssassin has previously made.\n                ")])],1)]:s("ui-button",{attrs:{theme:"primary"},on:{click:e.enableSpamAssassin}},[s("translate",[e._v("Enable SpamAssassin")])],1)],2),e._v(" "),e.enabled?s("template",{slot:"bottom:links"},[s("ui-link",{attrs:{name:"user/filemanager/edit",query:{path:"/.spamassassin/user_prefs"},bullet:""}},[s("translate",[e._v("Manually edit the config file yourself")])],1)],1):e._e()],2)},l=[];s.d(t,"a",function(){return a}),s.d(t,"b",function(){return l})},2411:function(e,t){}}]);