(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1194:function(t,e,a){"use strict";a.r(e);var n=a(2187),r=a(1445);for(var s in r)"default"!==s&&function(t){a.d(e,t,function(){return r[t]})}(s);var o=a(0),i=a(2327),l=a.n(i),u=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);"function"==typeof l.a&&l()(u),e.default=u.exports},1444:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a(11)),r=i(a(10)),s=i(a(3)),o=a(7);function i(t){return t&&t.__esModule?t:{default:t}}e.default=(0,s.default)({},(0,o.preload)({GET_PROTECTED_DIRECTORY_INFO:function(t){return{path:t.query.path}}}),{data:function(){return{select:[],name:"",user:"",passwd:""}},computed:(0,s.default)({},(0,o.mapResponse)({GET_PROTECTED_DIRECTORY_INFO:"info"}),{path:function(){return this.$route.query.path},users:function(){return this.info.rows.map(function(t){return t.username})}}),methods:{deleteUsers:function(){this.$actionRequest("DELETE_PROTECTED_DIRECTORY_USERS",this.$get(["select","path"]))},addUser:function(){var t=this;return(0,r.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("ADD_PROTECTED_DIRECTORY_USER",{path:t.path,user:t.user,passwd:t.passwd,passwd2:t.passwd,name:t.name},{reset:!0});case 2:t.name=t.info.name;case 3:case"end":return e.stop()}},e,t)}))()},disableProtection:function(){var t=this;return(0,r.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("UNPROTECT_DIRECTORY",{name:t.name,path:t.path});case 2:e.sent&&t.$router.replace({name:"user/protected-directories"});case 4:case"end":return e.stop()}},e,t)}))()},updateName:function(){this.$actionRequest("UPDATE_DIRECTORY_NAME",this.$get(["name","path"]))},validateUsername:function(t){return!this.users.includes(t)}},created:function(){this.name=this.info.name}})},1445:function(t,e,a){"use strict";a.r(e);var n=a(1444),r=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=r.a},2187:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("ui-button",{attrs:{slot:"header:buttons",theme:"danger"},on:{click:function(e){t.$dialog("REMOVE_PROTECTION_DIALOG").open()}},slot:"header:buttons"},[a("translate",[t._v("Remove Protection")])],1),t._v(" "),a("app-page-section",[a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Path:")]),t._v(" "),a("input-text",{attrs:{slot:"content",disabled:"",value:t.path},slot:"content"})],1),t._v(" "),a("ui-form-element",{attrs:{group:"dirName",validators:{required:!0},underline:!1}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Name:")]),t._v(" "),a("input-text",{attrs:{slot:"content",placeholder:t.$gettext("eg. Member's Area")},slot:"content",model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("ui-button",{attrs:{slot:"additions:right",theme:"safe",validateGroup:"dirName"},on:{click:t.updateName},slot:"additions:right"},[a("translate",[t._v("Update")])],1)],1)],1),t._v(" "),a("ui-api-table",t._b({attrs:{hideBeforeControls:""},on:{"action:del":function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{endpoint:"GET_PROTECTED_DIRECTORY_INFO",requestData:{path:t.path},rowID:"username",columns:{username:{label:t.$gettext("Users"),grow:!0}},actions:{del:{label:t.$gettext("Delete"),disabled:t.select.length===t.info.rowsCount}},updateOn:["DELETE_PROTECTED_DIRECTORY_USERS","ADD_PROTECTED_DIRECTORY_USER"]},!1),[a("ui-grid",{attrs:{slot:"table:after",main:"end"},slot:"table:after"},[a("ui-button",{attrs:{icon:"plus-fill",size:"small",theme:"light"},on:{click:function(e){t.$dialog("ADD_USER_DIALOG").open()}}},[a("translate",[t._v("Add User")])],1)],1)],1)],1),t._v(" "),a("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("user","users",t.select.length)},on:{"click:confirm":t.deleteUsers}}),t._v(" "),a("ui-dialog",{attrs:{id:"ADD_USER_DIALOG",theme:"safe"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Add User")]),t._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{vertical:"",group:"addProtectedDirUser",validators:{required:!0,validateUsername:t.validateUsername}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Username")]),t._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),t._v(" "),a("translate",{attrs:{slot:"error:validateUsername"},slot:"error:validateUsername"},[t._v("\n                    User already exists\n                ")])],1),t._v(" "),a("ui-form-element",{attrs:{vertical:"",group:"addProtectedDirUser",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Password")]),t._v(" "),a("input-password",{attrs:{slot:"content",showGenerator:""},slot:"content",model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}})],1)],1),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe",validateGroup:"addProtectedDirUser"},on:{click:t.addUser},slot:"buttons"},[a("translate",[t._v("Add")])],1)],2),t._v(" "),a("ui-dialog-confirm",{attrs:{id:"REMOVE_PROTECTION_DIALOG"},on:{"click:confirm":t.disableProtection}},[a("translate",{attrs:{"translate-params":{path:t.path}}},[t._v("\n            Are you sure you want to disable protection for %{path}?\n        ")])],1)],1)},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},2327:function(t,e){}}]);