(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{1308:function(e,t,n){"use strict";n.r(t);var s=n(2271),a=n(1929);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);var l=n(0),i=n(2668),o=n.n(i),u=Object(l.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof o.a&&o()(u),t.default=u.exports},1374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(24)),a=o(n(11)),r=o(n(10)),l=n(7),i=o(n(1383));function o(e){return e&&e.__esModule?e:{default:e}}t.default={components:{InputIp:i.default},props:{reloadIps:{type:Boolean,required:!1,default:!1}},data:function(){return{ip:"",netmask:"255.255.255.0",version:"v4",addToDevice:!0}},computed:(0,l.mapTokens)({haveIPv6:"HAVE_IPV6"}),methods:{submit:function(){var e=this;return(0,r.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$actionRequest("ADD_IP",{ip:e.ip,netmask:"v4"===e.version?e.netmask:"/"+e.netmask,add_to_device:e.addToDevice},{reset:!0});case 2:e.reloadIps&&e.$request("GET_IPS");case 3:case"end":return t.stop()}},t,e)}))()},validateIP:function(e){if(!e)return!0;var t=e.split("-"),n=(0,s.default)(t,1)[0];return this.regexps.ip.test(n)},validateRange:function(e){if(!e)return!0;var t=e.split("-"),n=(0,s.default)(t,2),a=n[0],r=n[1],l=a.split("v4"===this.version?".":":").pop();if(!l||!r)return!0;var i="v4"===this.version?10:16;return parseInt(r,i)>parseInt(l,i)}}}},1375:function(e,t,n){"use strict";n.r(t);var s=n(1374),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,function(){return s[e]})}(r);t.default=a.a},1384:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"ADD_IP_DIALOG",theme:"primary"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Add IP Address")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{group:"addIp",validators:{required:!0,validateIP:e.validateIP,validateRange:e.validateRange},vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("IP Address")]),e._v(" "),n("input-ip",{attrs:{slot:"content",version:e.version,netmask:e.netmask,disableVersionSelect:!e.haveIPv6,allowRange:""},on:{"update:version":function(t){e.version=t},"update:netmask":function(t){e.netmask=t}},slot:"content",model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}}),e._v(" "),n("translate",{attrs:{slot:"error:validateIP"},slot:"error:validateIP"},[e._v("Should be valid IP Address")]),e._v(" "),n("translate",{attrs:{slot:"error:validateRange"},slot:"error:validateRange"},[e._v("Range end should be larger than start")])],1),e._v(" "),n("ui-form-element",{attrs:{group:"addIp",validators:{required:!0,regex:e.regexps.ip},vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Netmask")]),e._v(" "),"v4"===e.version?n("input-ip",{attrs:{slot:"content",disableVersionSelect:""},slot:"content",model:{value:e.netmask,callback:function(t){e.netmask=t},expression:"netmask"}}):n("translate",{attrs:{slot:"content"},slot:"content"},[e._v("\n                For IPv6 IPs, use a /mask, eg: /64\n            ")]),e._v(" "),n("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("Should be valid netmask")])],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.addToDevice,callback:function(t){e.addToDevice=t},expression:"addToDevice"}},[n("translate",[e._v("Add to device")])],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"addIp"},on:{click:e.submit},slot:"buttons"},[n("translate",[e._v("Add IP")])],1)],2)},a=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a})},1925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(7);t.default={props:{ipCount:{type:Number,required:!0}},data:function(){return{reseller:""}},computed:(0,s.mapResponse)({GET_IPS:["creators"]}),methods:{submit:function(){this.$emit("assign",this.reseller)}}}},1926:function(e,t,n){"use strict";n.r(t);var s=n(1925),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,function(){return s[e]})}(r);t.default=a.a},1927:function(e,t,n){"use strict";n.r(t);var s=n(1384),a=n(1375);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);var l=n(0),i=Object(l.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports},1928:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(3)),a=n(7),r=i(n(1927)),l=i(n(2669));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,s.default)({},(0,a.preload)("GET_IPS"),{components:{AddIpDialog:r.default,AssignIpDialog:l.default},data:function(){return{select:[]}},computed:(0,s.default)({},(0,a.mapResponse)({GET_IPS:["rows"]}),{selectedRows:function(){var e=this;return this.rows.filter(function(t){return e.select.includes(t.ip)})},enableAssign:function(){return 1===this.selectedRows.length&&!this.selectedRows[0].reseller},enableRemove:function(){return this.selectedRows.every(function(e){return e.reseller})},enableDelete:function(){return this.selectedRows.every(function(e){return!e.reseller&&"free"===e.status})}}),methods:{assignIp:function(e){this.$actionRequest("ASSIGN_IP_RESELLER",{select:this.select,reseller:e})},removeIpReseller:function(){this.$actionRequest("REMOVE_IP_RESELLER",this.$get("select"))},clearIpNamespace:function(){this.$actionRequest("CLEAR_IP_NAMESPACE",this.$get("select"))},deleteIps:function(){this.$actionRequest("DELETE_IPS",this.$get("select"))}}})},1929:function(e,t,n){"use strict";n.r(t);var s=n(1928),a=n.n(s);for(var r in s)"default"!==r&&function(e){n.d(t,e,function(){return s[e]})}(r);t.default=a.a},2052:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"ASSIGN_IP_DIALOG",theme:"safe"}},[n("translate",{attrs:{slot:"title","translate-n":e.ipCount,"translate-plural":"Assign IPs"},slot:"title"},[e._v("\n        Assign IP\n    ")]),e._v(" "),n("ui-form-element",{attrs:{slot:"content",group:"assignIp",validators:{required:!0}},slot:"content"},[n("translate",{attrs:{slot:"title","translate-n":e.ipCount,"translate-plural":"Assign IPs to:"},slot:"title"},[e._v("\n            Assign IP to:\n        ")]),e._v(" "),n("input-usual-select",{attrs:{slot:"content",options:e.creators},slot:"content",model:{value:e.reseller,callback:function(t){e.reseller=t},expression:"reseller"}})],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",validateGroup:"assignIp",theme:"safe"},on:{click:e.submit},slot:"buttons"},[n("translate",[e._v("Assign")])],1)],1)},a=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a})},2271:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("template",{slot:"header:buttons"},[n("ui-button",{attrs:{theme:"primary"},on:{click:function(t){e.$dialog("ADD_IP_DIALOG").open()}}},[n("translate",[e._v("Add IP")])],1)],1),e._v(" "),n("app-page-section",[n("ui-api-table",e._b({attrs:{equalWidthLayout:""},on:{"action:assign":function(t){e.$dialog("ASSIGN_IP_DIALOG").open()},"action:remove":e.removeIpReseller,"action:clear":e.clearIpNamespace,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:ip",fn:function(t){var s=t.ip;return n("ui-link",{attrs:{name:"admin/ip-manager/details",params:{ip:s}}},[e._v("\n                "+e._s(s)+"\n            ")])}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{endpoint:"GET_IPS",rowID:"ip",columns:{ip:e.$gettext("IP"),status:e.$gettext("Status"),reseller:e.$gettext("Reseller"),users:e.$gettext("Users"),nameserver:{label:e.$gettext("Nameserver"),filter:"p6e-unicode"},netmask:e.$gettext("Netmask")},actions:{assign:{label:e.$gettext("Assign"),disabled:!e.enableAssign},remove:{label:e.$gettext("Remove from reseller"),disabled:!e.enableRemove},clear:e.$gettext("Clear NS"),del:{label:e.$gettext("Delete"),disabled:!e.enableDelete}},updateOn:["CLEAR_IP_NAMESPACE","ASSIGN_IP_RESELLER","REMOVE_IP_RESELLER","DELETE_IPS","ADD_IP"],verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),n("assign-ip-dialog",{attrs:{ipCount:e.select.length},on:{assign:e.assignIp}}),e._v(" "),n("add-ip-dialog"),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("IP Address","IP Addresses",e.select.length)},on:{"click:confirm":e.deleteIps}})],2)},a=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a})},2668:function(e,t){},2669:function(e,t,n){"use strict";n.r(t);var s=n(2052),a=n(1926);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);var l=n(0),i=Object(l.a)(a.default,s.a,s.b,!1,null,null,null);t.default=i.exports}}]);