(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1213:function(t,e,n){"use strict";n.r(e);var s=n(2147),a=n(1500);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(0),u=n(2361),c=n.n(u),i=Object(r.a)(a.default,s.a,s.b,!1,null,null,null);"function"==typeof c.a&&c()(i),e.default=i.exports},1497:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=n(3),o=(s=a)&&s.__esModule?s:{default:s},r=n(7);e.default={props:{username:{type:String,required:!0}},data:function(){return{oldPassword:"",newPassword:""}},computed:(0,o.default)({},(0,r.mapTokens)({ftpSep:"FTP_SEP"}),{fullUsername:function(){return""+this.username+this.ftpSep+this.$domain},requestData:function(){return{ftp:""+this.username+this.ftpSep+this.$domain,oldpassword:this.oldPassword,password1:this.newPassword,password2:this.newPassword}}}),methods:{changePassword:function(){this.$actionRequest("CHANGE_FTP_PASSWORD",this.requestData)}}}},1498:function(t,e,n){"use strict";n.r(e);var s=n(1497),a=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);e.default=a.a},1499:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=c(n(11)),a=c(n(10)),o=c(n(3)),r=n(7),u=c(n(2362));function c(t){return t&&t.__esModule?t:{default:t}}e.default=(0,o.default)({components:{ChangeFtpPasswordDialog:u.default}},(0,r.preload)("GET_FTP_ACCOUNTS"),{data:function(){return{checkedRows:[],currentUsername:""}},computed:(0,o.default)({},(0,r.mapResponse)({GET_FTP_ACCOUNTS:["accounts","anonLogin"],GET_TOKENS:{aFTP:"USERAFTP"}}),{rows:function(){var t=this.$state.app.user.name;return this.accounts.map(function(e){return(0,o.default)({},e,{route:t===e.user?"user/password":"user/ftp-accounts/edit"})})},currentUser:function(){var t=this;return this.rows.find(function(e){return e.user===t.$state.app.user.name})},checkedAccounts:function(){return this.checkedRows.map(function(t){return t.user})},suspendActionAvailable:function(){return!!this.checkedRows.find(function(t){return!t.suspended})},unsuspendActionAvailable:function(){return!!this.checkedRows.find(function(t){return t.suspended})}}),watch:{$domain:function(){this.loadAccounts()}},methods:{suspendAccounts:function(){var t=this;return(0,a.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("SUSPEND_FTP_ACCOUNTS",{select:t.checkedAccounts});case 2:(n=e.sent)&&"0"===n.error&&(t.$notify({theme:"safe",title:t.$ngettext("Account was successfully suspended","Accounts was successfully suspended",t.checkedAccounts.length)}),t.checkedRows=[],t.loadAccounts());case 4:case"end":return e.stop()}},e,t)}))()},unsuspendAccounts:function(){var t=this;return(0,a.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("UNSUSPEND_FTP_ACCOUNTS",{select:t.checkedAccounts});case 2:(n=e.sent)&&"0"===n.error&&(t.$notify({theme:"safe",title:t.$ngettext("Account was successfully unsuspended","Accounts was successfully unsuspended",t.checkedAccounts.length)}),t.checkedRows=[],t.loadAccounts());case 4:case"end":return e.stop()}},e,t)}))()},deleteAccounts:function(){var t=this;return(0,a.default)(s.default.mark(function e(){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("DELETE_FTP_ACCOUNTS",{select:t.checkedAccounts});case 2:(n=e.sent)&&"0"===n.error&&(t.$notify({theme:"safe",title:t.$ngettext("Account was successfully deleted","Accounts was successfully deleted",t.checkedAccounts.length)}),t.checkedRows=[],t.loadAccounts());case 4:case"end":return e.stop()}},e,t)}))()},loadAccounts:function(){this.$request("GET_FTP_ACCOUNTS")},openPasswordDialog:function(t){this.currentUsername=t,this.$dialog("CHANGE_FTP_PASSWORD_DIALOG").open()}}})},1500:function(t,e,n){"use strict";n.r(e);var s=n(1499),a=n.n(s);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);e.default=a.a},2098:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"CHANGE_FTP_PASSWORD_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Change Password")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Username")]),t._v(" "),n("input-text",{attrs:{slot:"content",value:t.fullUsername,disabled:""},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:"",group:"changePassword",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Old Password")]),t._v(" "),n("input-password",{attrs:{slot:"content"},slot:"content",model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:"",group:"changePassword",validators:{required:!0,apiValidation:"VALIDATE_PASSWORD"}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("New Password")]),t._v(" "),n("input-password",{attrs:{slot:"content",showGenerator:""},slot:"content",model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.changePassword},slot:"buttons"},[n("translate",[t._v("Change")])],1)],2)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2147:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("translate",{attrs:{slot:"page:title","translate-params":{domain:t.$domainUnicode}},slot:"page:title"},[t._v("\n        FTP Accounts for %{ domain }\n    ")]),t._v(" "),n("ui-tokens-conditional-button",{attrs:{slot:"header:buttons",link:"",theme:"primary",name:"user/ftp-accounts/create",token:"USERFTPMAX",usage:t.rows.length},slot:"header:buttons"},[n("translate",[t._v("Create FTP Account")]),t._v(" "),n("translate",{attrs:{slot:"limitText"},slot:"limitText"},[t._v("FTP Account limit reached")])],1),t._v(" "),t.aFTP?n("ui-link",{attrs:{slot:"bottom:links",name:"user/ftp-settings",bullet:""},slot:"bottom:links"},[n("translate",[t._v("Anonymous FTP Settings")])],1):t._e(),t._v(" "),n("app-page-section",[n("ui-stats-summary",{attrs:{badges:[{label:t.$gettext("FTP accounts"),value:t.rows.length},t.aFTP?{label:t.$gettext("Anonymous Login"),value:t.anonLogin}:{}]}})],1),t._v(" "),n("app-page-section",[n("ui-table",t._b({attrs:{checkedRows:t.checkedRows},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:user",fn:function(e){var s=e.user,a=e.login,o=e.route;return n("ui-link",{attrs:{name:o,params:{user:s}}},[t._v("\n                "+t._s(a)+"\n            ")])}},{key:"col:suspended",fn:function(e){var s=e.suspended;return n("ui-badge",{attrs:{theme:s?"danger":"safe"}},[n("translate",s?[t._v("Yes")]:[t._v("No")])],1)}},{key:"row:actions",fn:function(e){var s=e.user;return s!==t.$state.app.user.name?n("ui-actions",{},[n("ui-link",{on:{click:function(e){t.openPasswordDialog(s)}}},[n("translate",[t._v("\n                        Change Password\n                    ")])],1)],1):t._e()}}])},"ui-table",{rows:t.rows,columns:[{id:"user",label:this.$gettext("Account"),editable:!1},{id:"path",label:this.$gettext("Server Path"),grow:!0},{id:"suspended",label:this.$gettext("Suspended")}],isSortable:!0,notCheckable:[t.currentUser],disablePagination:!0,rowsCount:t.rows.length,verticalLayout:t.$_Client.isPhone},!1),[n("template",{slot:"table:actions"},[t.suspendActionAvailable?n("ui-table-action",{on:{click:t.suspendAccounts}},[n("translate",[t._v("Suspend")])],1):t._e(),t._v(" "),t.unsuspendActionAvailable?n("ui-table-action",{on:{click:t.unsuspendAccounts}},[n("translate",[t._v("Unsuspend")])],1):t._e(),t._v(" "),n("ui-table-action",{on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[t._v("Delete")])],1)],1)],2)],1),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("account","accounts",t.checkedRows.length)},on:{"click:confirm":t.deleteAccounts}}),t._v(" "),n("change-ftp-password-dialog",{attrs:{username:t.currentUsername}})],1)},a=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a})},2361:function(t,e){},2362:function(t,e,n){"use strict";n.r(e);var s=n(2098),a=n(1498);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(0),u=Object(r.a)(a.default,s.a,s.b,!1,null,null,null);e.default=u.exports}}]);