(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1227:function(t,e,n){"use strict";n.r(e);var s=n(2172),i=n(1572);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var r=n(0),o=n(2416),l=n.n(o),u=Object(r.a)(i.default,s.a,s.b,!1,null,null,null);"function"==typeof l.a&&l()(u),e.default=u.exports},1571:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(11)),i=o(n(10)),a=o(n(3)),r=n(7);function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,a.default)({},(0,r.preload)("GET_EMAIL_MAILING_LISTS"),{data:function(){return{listName:"",purgeDays:"90",checkedRows:[]}},computed:(0,a.default)({},(0,r.mapResponse)({GET_EMAIL_MAILING_LISTS:"rows"}),{checkedLists:function(){return this.checkedRows.map(function(t){return t.list})}}),watch:{$domain:function(){this.reloadRows()}},methods:{reloadRows:function(){this.$request("GET_EMAIL_MAILING_LISTS")},createList:function(){var t=this;return(0,i.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("CREATE_EMAIL_MAILING_LIST",{name:t.listName},{reset:!0});case 2:e.sent&&(t.checkedRows=[],t.reloadRows());case 4:case"end":return e.stop()}},e,t)}))()},purgeArchives:function(){var t=this;return(0,i.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("PURGE_EMAIL_MAILING_LIST_ARCHIVES",{select:t.checkedLists,purge_days:t.purgeDays});case 2:e.sent&&(t.checkedRows=[],t.reloadRows());case 4:case"end":return e.stop()}},e,t)}))()},deleteLists:function(){var t=this;return(0,i.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("DELETE_MAILING_LISTS",{select:t.checkedLists});case 2:e.sent&&(t.checkedRows=[],t.reloadRows());case 4:case"end":return e.stop()}},e,t)}))()}}})},1572:function(t,e,n){"use strict";n.r(e);var s=n(1571),i=n.n(s);for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);e.default=i.a},2172:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("ui-tokens-conditional-button",{attrs:{slot:"header:buttons",theme:"primary",usage:t.rows.length,token:"USERMLISTMAX"},on:{click:function(e){t.$dialog("CREATE_LIST_DIALOG").open()}},slot:"header:buttons"},[n("translate",[t._v("Create Mailing List")]),t._v(" "),n("translate",{attrs:{slot:"limitText"},slot:"limitText"},[t._v("Mailing Lists limit reached")])],1),t._v(" "),n("app-page-section",[n("ui-table",t._b({attrs:{disablePagination:""},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:list",fn:function(e){var s=e.list;return[n("ui-link",{attrs:{name:"user/email/lists/view",params:{name:s}}},[t._v("\n                    "+t._s(s)+"@"+t._s(t.$domainUnicode)+"\n                ")])]}},{key:"col:archive_size",fn:function(e){var n=e.archive_size;return[t._v("\n                "+t._s(t._f("humanReadableSize")(n))+"\n            ")]}},{key:"row:actions",fn:function(e){var s=e.item;return n("ui-button-link",{attrs:{icon:"pencil",title:t.$gettext("Edit"),name:"user/email/lists/modify",params:{name:s.list}}})}}])},"ui-table",{rows:t.rows,columns:[{id:"list",label:t.$gettext("Mailing List"),editable:!1},{id:"subscribers",label:t.$gettext("Subscribers")},{id:"digest_subscribers",label:t.$gettext("Digest Subscribers")},{id:"archive_size",label:t.$gettext("Archive Size")}],checkedRows:t.checkedRows,verticalLayout:t.$_Client.isPhone},!1),[n("template",{slot:"table:actions"},[n("ui-table-action",{on:{click:function(e){t.$dialog("PURGE_ARCHIVES_DIALOG").open()}}},[n("translate",[t._v("Purge Archives")])],1),t._v(" "),n("ui-table-action",{on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[t._v("Delete")])],1)],1)],2)],1),t._v(" "),n("ui-dialog",{attrs:{id:"CREATE_LIST_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Create Mailing List")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:"",group:"mailingList",validators:{required:!0,maxLength:64}},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                List Name:\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content",suffix:"@"+t.$domainUnicode},slot:"content",model:{value:t.listName,callback:function(e){t.listName=e},expression:"listName"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"mailingList"},on:{click:t.createList},slot:"buttons"},[n("translate",[t._v("Create")])],1)],1),t._v(" "),n("ui-dialog",{attrs:{id:"PURGE_ARCHIVES_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Purge Archives")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content"},slot:"content"},[n("input-text",{attrs:{slot:"content",number:"",suffix:t.$gettext("days.")},slot:"content",model:{value:t.purgeDays,callback:function(e){t.purgeDays=e},expression:"purgeDays"}}),t._v(" "),n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Purge Archives older than")])],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:t.purgeArchives},slot:"buttons"},[n("translate",[t._v("Purge")])],1)],1),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("mailing list","mailing lists",t.checkedRows.length)},on:{"click:confirm":t.deleteLists}})],1)},i=[];n.d(e,"a",function(){return s}),n.d(e,"b",function(){return i})},2416:function(t,e){}}]);