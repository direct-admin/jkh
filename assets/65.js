(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1242:function(t,e,n){"use strict";n.r(e);var a=n(2197),s=n(1630);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);n(2453);var o=n(0),u=n(2451),i=n.n(u),l=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);"function"==typeof i.a&&i()(l),e.default=l.exports},1626:function(t,e,n){var a=n(2452);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(4).default)("0c3d0a20",a,!0,{})},1627:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{id:String,created:Date,published:Date,activated:Date,value:String}}},1628:function(t,e,n){"use strict";n.r(e);var a=n(1627),s=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=s.a},1629:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c(n(3)),s=c(n(11)),r=c(n(10)),o=n(7),u=n(17),i=n(18),l=c(n(2454));function c(t){return t&&t.__esModule?t:{default:t}}var f,d=(f=(0,r.default)(s.default.mark(function t(e,n){var a,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={ptr:n.query.pointer||null},t.next=4,(0,o.request)("CHECK_DNSSEC_STATUS",a);case 4:(r=t.sent).keys&&(0,o.request)("GET_DNSSEC_KEYS",a),r.zone&&(0,o.request)("GET_DNSSEC_ZONE",a),e(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e(t.t0);case 13:case"end":return t.stop()}},t,void 0,[[0,10]])})),function(t,e){return f.apply(this,arguments)});e.default={components:{ZoneKey:l.default},beforeRouteEnter:function(t,e,n){var a=this;return(0,r.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.State)("app.tokens.HAVE_DNSSEC")){e.next=3;break}return n("/account-manager/dns"),e.abrupt("return");case 3:d(n,t);case 4:case"end":return e.stop()}},e,a)}))()},beforeRouteUpdate:function(t,e,n){var a=this;return(0,r.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.params.domain&&a.$store.commit("app/SET_DOMAIN",t.params.domain),d(n);case 2:case"end":return e.stop()}},e,a)}))()},computed:(0,a.default)({},(0,u.mapState)({domain:function(t){return t.app.domain},keys:function(t){return t.api.GET_DNSSEC_KEYS.response},zone:function(t){return t.api.GET_DNSSEC_ZONE.response},status:function(t){return t.api.CHECK_DNSSEC_STATUS.response},zoneLoaded:function(t){return t.api.GET_DNSSEC_ZONE.isDone},keysLoaded:function(t){return t.api.GET_DNSSEC_KEYS.isDone}}),{keysRows:function(){return this.keysLoaded?{zone:{id:this.$gettext("Zone-Signing Key"),data:this.keys.zone},key:{id:this.$gettext("Key-Signing Key"),data:this.keys.key}}:{}},zoneRows:function(){return[{label:this.$gettext("Signed"),value:this.zone.signedDate},{label:this.$gettext("Expiry"),value:this.zone.expiryDate},{label:this.$gettext("DS Record"),value:this.zone.DS},{label:this.$gettext("DLV Record"),value:this.zone.DLV}].map(function(t){return(0,a.default)({},t,{date:t.value instanceof Date})})},ptr:function(){return this.$route.query.pointer||null}}),watch:{domain:function(){var t=this;return(0,r.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$request("CHECK_DNSSEC_STATUS"),t.$request("GET_DNSSEC_KEYS"),t.$request("GET_DNSSEC_ZONE");case 3:case"end":return e.stop()}},e,t)}))()}},methods:{generateKeys:function(){var t=this;return(0,r.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("GENERATE_DNSSEC_KEYS",t.$get("ptr"));case 2:t.$request("CHECK_DNSSEC_STATUS",t.$get("ptr")),t.$request("GET_DNSSEC_KEYS",t.$get("ptr"));case 4:case"end":return e.stop()}},e,t)}))()},signZone:function(){var t=this;return(0,r.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$request("SIGN_DNSSEC_ZONE",t.$get("ptr"));case 2:t.$request("CHECK_DNSSEC_STATUS",t.$get("ptr")),t.$request("GET_DNSSEC_ZONE",t.$get("ptr"));case 4:case"end":return e.stop()}},e,t)}))()}}}},1630:function(t,e,n){"use strict";n.r(e);var a=n(1629),s=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=s.a},2108:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zone-key"},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("ID")]),t._v(" "),n("span",{attrs:{slot:"content"},domProps:{textContent:t._s(t.id)},slot:"content"})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Created")]),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("date")(t.created)))])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Published")]),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("date")(t.published)))])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Activated")]),t._v(" "),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t._f("date")(t.activated)))])],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("ui-code-area",{attrs:{slot:"content",breakLines:"",content:t.value},slot:"content"})],1)],1)},s=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s})},2197:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("template",{slot:"header:buttons"},[t.zoneLoaded&&t.status.keys?n("ui-button",{attrs:{theme:"primary"},on:{click:t.signZone}},[n("translate",[t._v("Re-sign your zone")])],1):t._e(),t._v(" "),!t.keysLoaded||t.zoneLoaded||t.status.zone||t.$state.api.GET_DNSSEC_ZONE.isLoading?t._e():n("ui-button",{attrs:{theme:"primary"},on:{click:t.signZone}},[n("translate",[t._v("Sign your zone")])],1),t._v(" "),n("ui-button",{attrs:{theme:"safe"},on:{click:t.generateKeys}},[n("translate",[t._v("Generate Keys")])],1)],1),t._v(" "),n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("\n            Zone Signing\n        ")]),t._v(" "),t.zoneLoaded&&t.keysLoaded&&t.status.keys?t._l(t.zoneRows,function(e){return n("ui-form-element",{key:e.label,attrs:{vertical:t.$_Client.isPhone}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.label))]),t._v(" "),n("template",{slot:"content"},[e.date?n("span",[t._v("\n                        "+t._s(t._f("date")(e.value))+"\n                    ")]):n("ui-code-area",{attrs:{breakLines:"",content:e.value}})],1)],2)}):n("h5",[n("translate",{staticClass:"c:txt:danger"},[t._v("\n                Zone keys are newer than the Zone Signing.\n            ")])],1)],2),t._v(" "),t.keysLoaded?n("app-page-section",[t.status.keys?n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Zone Keys")]):t._e(),t._v(" "),(t.status.keys,t._e()),t._v(" "),n("ui-tabs",{attrs:{tabs:[{id:"zone",label:this.$gettext("Zone-Signing Key")},{id:"key",label:this.$gettext("Key-Signing Key")}]}},[n("zone-key",t._b({attrs:{slot:"tab:zone",value:t.keys.zone.key},slot:"tab:zone"},"zone-key",t.keys.zone,!1)),t._v(" "),n("zone-key",t._b({attrs:{slot:"tab:key",value:t.keys.key.key},slot:"tab:key"},"zone-key",t.keys.key,!1))],1)],1):t._e(),t._v(" "),t.status.keys?t._e():n("app-page-section",[n("h5",[n("translate",{staticClass:"c:txt:danger"},[t._v("\n                Keys not yet generated.\n            ")])],1)])],2)},s=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s})},2451:function(t,e){},2452:function(t,e,n){(t.exports=n(5)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"security.vue?vue&type=style&index=0&lang=scss",sourceRoot:""}])},2453:function(t,e,n){"use strict";var a=n(1626);n.n(a).a},2454:function(t,e,n){"use strict";n.r(e);var a=n(2108),s=n(1628);for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);var o=n(0),u=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);e.default=u.exports}}]);