(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{1309:function(t,e,n){"use strict";n.r(e);var r=n(2272),a=n(1931);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n(0),o=n(2670),u=n.n(o),l=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);"function"==typeof u.a&&u()(l),e.default=l.exports},1342:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(1)),a=u(n(3)),i=u(n(13)),s=u(n(20)),o=n(1381);function u(t){return t&&t.__esModule?t:{default:t}}var l=s.default.extend({extends:o.Line,mixins:[o.mixins.reactiveProp],props:["chart","options"],mounted:function(){this.renderChart(this.chartData,this.options)}});e.default={components:{LineChart:l},data:function(){return{year:null,hovered:null}},props:{type:{type:String,required:!1,default:"volumes"},history:{type:Array,required:!0},hideLinks:{type:Boolean,required:!1,default:!1}},computed:{years:function(){return(0,i.default)(this.history.reduce(function(t,e){var n=e.year;return(0,a.default)((0,r.default)({},n,n),t)},{}))},rows:function(){var t=this;return this.history.filter(function(e){return e.year===t.year})},labels:function(){return this.rows.map(this.getMonthName)},chartData:function(){return this.chart[this.type].chartData},options:function(){return this.chart[this.type].options},chart:function(){var t=this,e={enabled:!0,mode:"nearest",intersect:!1,bodySpacing:6,xPadding:10,yPadding:10,titleFontFamily:"Open Sans",bodyFontFamily:"Open Sans",footerFontFamily:"Open Sans",footerFontSize:10,displayColors:!1};return{volumes:{chartData:{labels:this.labels,datasets:[(0,a.default)({label:this.$gettext("Bandwidth"),data:this.rows.map(function(t){return t.bandwidth})},this.datasetOptions("danger")),(0,a.default)({label:this.$gettext("Disk Usage"),data:this.rows.map(function(t){return t.quota})},this.datasetOptions("primary"))]},options:{onClick:this.chartsClick,legend:{onClick:function(){}},scales:{yAxes:[{ticks:{callback:this.size}}]},tooltips:(0,a.default)({},e,{callbacks:{title:function(e){var n=t.rows[e[0].index];return t.getMonthName(n)+" "+n.year},label:function(e){var n=e.datasetIndex,r=e.yLabel,a=[t.$gettext("Bandwidth"),t.$gettext("Disk Usage")][n];return a+": "+t.size(r)},footer:function(e){return 0!==e[0].datasetIndex||t.hideLinks?(t.$emit("hover:clear"),""):(t.$emit("hover:date",t.rows[e[0].index]),t.$gettext("Click for details"))}}})}},inodes:{chartData:{labels:this.labels,datasets:[(0,a.default)({label:this.$gettext("Inodes Count"),data:this.rows.map(function(t){return t.inode})},this.datasetOptions("safe"))]},options:{legend:{onClick:function(){}},tooltips:(0,a.default)({},e,{callbacks:{title:function(e){var n=t.rows[e[0].index];return t.getMonthName(n)+" "+n.year},footer:function(){return t.hideLinks?void 0:t.$gettext("Click for details")}}})}}}}},methods:{chartsClick:function(){this.hovered&&this.$emit("click",this.hovered)},size:function(t){return this.$options.filters.humanReadableSize(t)},datasetOptions:function(t){var e=function(t){return getComputedStyle(document.body).getPropertyValue("--"+t)};return{backgroundColor:e(t+"-overlay"),borderColor:e(t),pointBackgroundColor:e(t),borderWidth:3,pointRadius:5,pointHitRadius:20}},getMonthName:function(t){var e=t.month;return[this.$gettext("January"),this.$gettext("February"),this.$gettext("March"),this.$gettext("April"),this.$gettext("May"),this.$gettext("June"),this.$gettext("July"),this.$gettext("August"),this.$gettext("September"),this.$gettext("October"),this.$gettext("November"),this.$gettext("December")][parseInt(e,10)-1]}},created:function(){var t=this;this.year=this.years[this.years.length-1],this.$on("hover:date",function(e){var n=e.year,r=e.month;t.hovered={year:n,month:r}}),this.$on("hover:clear",function(){t.hovered=null})}}},1343:function(t,e,n){"use strict";n.r(e);var r=n(1342),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);e.default=a.a},1344:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),a=n(6);e.default={data:function(){return{sort:{key:"date",order:"ASC"}}},props:{history:{type:Array,required:!0},hideLinks:{type:Boolean,required:!1,default:!1}},computed:{ipp:function(){var t=Number(this.$route.query.ipp)||!1;return t&&t>0?t:Number(r.IPP.default)},page:function(){var t=Number(this.$route.query.page)||!1;return t&&t>0?t:1},sortedHistory:function(){var t=a._.sortBy(this.history,{date:["year","month"]}[this.sort.key]||this.sort.key);return"DESC"===this.sort.order?t.reverse():t},rows:function(){return this.sortedHistory.slice((this.page-1)*this.ipp,this.page*this.ipp)}},methods:{getMonthName:function(t){return[this.$gettext("January"),this.$gettext("February"),this.$gettext("March"),this.$gettext("April"),this.$gettext("May"),this.$gettext("June"),this.$gettext("July"),this.$gettext("August"),this.$gettext("September"),this.$gettext("October"),this.$gettext("November"),this.$gettext("December")][parseInt(t,10)-1]}}}},1345:function(t,e,n){"use strict";n.r(e);var r=n(1344),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);e.default=a.a},1348:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page-section",[n("ui-table",{attrs:{rows:t.rows,sort:t.sort,columns:[{id:"year",label:t.$gettext("Date")},{id:"bandwidth",label:t.$gettext("Bandwidth")},{id:"quota",label:t.$gettext("Disk Usage")},{id:"inode",label:t.$gettext("Inodes Count")}],rowsCount:t.history.length,isCheckable:!1,verticalLayout:t.$_Client.isPhone,isSortable:"",externalSorting:"",equalWidthLayout:""},on:{"update:sort":function(e){t.sort=e}},scopedSlots:t._u([{key:"col:year",fn:function(e){var r=e.year,a=e.month;return n(t.hideLinks?"span":"ui-link",{tag:"component",staticClass:"txt:bold",on:{click:function(e){t.$emit("click",{year:r,month:a})}}},[t._v("\n            "+t._s(t.getMonthName(a))+", "+t._s(r)+"\n        ")])}},{key:"col:bandwidth",fn:function(e){var n=e.bandwidth;return[t._v("\n            "+t._s(t._f("humanReadableSize")(n))+"\n        ")]}},{key:"col:quota",fn:function(e){var n=e.quota;return[t._v("\n            "+t._s(t._f("humanReadableSize")(n))+"\n        ")]}}])})],1)},a=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a})},1349:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page-section",[n("ui-form-element",{attrs:{underline:!1,verticalOnPhone:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Year:")]),t._v(" "),n("input-usual-select",{attrs:{slot:"content",options:t.years},slot:"content",model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),t._v(" "),n("line-chart",t._b({key:t.type},"line-chart",t.chart[t.type],!1))],1)},a=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a})},1376:function(t,e,n){"use strict";n.r(e);var r=n(1349),a=n(1343);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n(0),o=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);e.default=o.exports},1377:function(t,e,n){"use strict";n.r(e);var r=n(1348),a=n(1345);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);var s=n(0),o=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);e.default=o.exports},1930:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(3)),a=n(7),i=o(n(1377)),s=o(n(1376));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)({},(0,a.preload)("GET_SERVER_HISTORY"),{components:{HistoryChart:s.default,HistoryTable:i.default},data:function(){return{showAs:"table",show:{bandwidth:!0,quota:!0,inode:!1},type:"volumes"}},computed:(0,r.default)({},(0,a.mapResponse)({GET_SERVER_HISTORY:"history"}))})},1931:function(t,e,n){"use strict";n.r(e);var r=n(1930),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);e.default=a.a},2272:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:"{ cross: 'center', main: 'between' }"},{name:"gutter",rawName:"v-gutter:padding",value:4,expression:"4",arg:"padding"}],staticClass:"filters"},[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[n("translate",{staticClass:"txt:bold"},[t._v("Show as:")]),t._v(" "),n("input-check",{attrs:{type:"radio",value:"table"},model:{value:t.showAs,callback:function(e){t.showAs=e},expression:"showAs"}},[n("translate",[t._v("Table")])],1),t._v(" "),n("input-check",{attrs:{type:"radio",value:"chart"},model:{value:t.showAs,callback:function(e){t.showAs=e},expression:"showAs"}},[n("translate",[t._v("Chart")])],1)],1)]),t._v(" "),n("transition",{attrs:{name:"fadeBounce"}},["table"===t.showAs?n("history-table",{key:"table",attrs:{history:t.history,hideLinks:""}}):n("history-chart",t._b({key:"chart",attrs:{hideLinks:""}},"history-chart",{history:t.history,type:t.type},!1))],1)],1)},a=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a})},2670:function(t,e){}}]);