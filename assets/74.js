(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{1251:function(t,e,a){"use strict";a.r(e);var n=a(2214),o=a(1707);for(var l in o)"default"!==l&&function(t){a.d(e,t,function(){return o[t]})}(l);var i=a(0),r=a(2507),s=a.n(r),u=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);"function"==typeof s.a&&s()(u),e.default=u.exports},1706:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a(11)),o=r(a(10)),l=r(a(3)),i=a(7);function r(t){return t&&t.__esModule?t:{default:t}}e.default=(0,l.default)({name:"CronJobs"},(0,i.preload)("GET_CRON_JOBS"),{data:function(){return{checkedRows:[],editableRow:{},email:""}},computed:{crondata:function(){return this.$state.api.GET_CRON_JOBS.response},checkedJobs:function(){return this.checkedRows.map(function(t){return t.id})}},created:function(){this.email=this.crondata.email},methods:{loadData:function(){this.$request("GET_CRON_JOBS")},deleteJobs:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("DELETE_CRON_JOBS",{select:t.checkedJobs});case 2:e.sent&&(t.checkedRows=[],t.clearEditable(),t.loadData());case 4:case"end":return e.stop()}},e,t)}))()},saveEmail:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$actionRequest("SAVE_CRON_EMAIL",{email:t.email}),t.$dialog("SEND_TO_EMAIL").close();case 2:case"end":return e.stop()}},e,t)}))()},setEditable:function(t){this.editableRow=(0,l.default)({},t),this.$dialog("EDIT_CRON_JOB").open()},clearEditable:function(){this.editableRow={},this.$dialog("EDIT_CRON_JOB").close()},updateJob:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("@reboot"!==t.editableRow.minute){e.next=5;break}return e.next=3,t.$actionRequest("UPDATE_CRON_JOB_REBOOT",t.editableRow);case 3:e.next=7;break;case 5:return e.next=7,t.$actionRequest("UPDATE_CRON_JOB",(0,l.default)({},t.editableRow,{dayofmonth:t.editableRow.day_of_month,dayofweek:t.editableRow.day_of_week}));case 7:t.clearEditable(),t.loadData();case 9:case"end":return e.stop()}},e,t)}))()}}})},1707:function(t,e,a){"use strict";a.r(e);var n=a(1706),o=a.n(n);for(var l in n)"default"!==l&&function(t){a.d(e,t,function(){return n[t]})}(l);e.default=o.a},2214:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",[a("template",{slot:"header:buttons"},[a("ui-button-link",{attrs:{theme:"primary",name:"user/cronjobs/create"}},[a("translate",[t._v("Create cron job")])],1)],1),t._v(" "),a("app-page-section",[a("ui-table",t._b({attrs:{rowsCount:t.crondata.rows.length,checkedRows:t.checkedRows,columns:[{id:"minute",label:t.$gettext("Minute")},{id:"hour",label:t.$gettext("Hour")},{id:"day_of_month",label:t.$gettext("Day of Month")},{id:"month",label:t.$gettext("Month")},{id:"day_of_week",label:t.$gettext("Day of Week")},{id:"command",label:t.$gettext("Command"),grow:!0}],disablePagination:"",editable:!1,verticalLayout:t.$_Client.isPhone},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"row:actions",fn:function(e){var n=e.item;return[a("ui-button-icon",{attrs:{icon:"pencil",title:t.$gettext("Edit")},on:{click:function(e){t.setEditable(n)}}})]}}])},"ui-table",t.crondata,!1),[a("template",{slot:"table:actions"},[a("ui-table-action",{on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}}},[a("translate",[t._v("Delete")])],1)],1)],2)],1),t._v(" "),a("template",{slot:"bottom:links"},[a("ui-link",{attrs:{bullet:""},on:{click:function(e){t.$dialog("SEND_TO_EMAIL").open()}}},[a("translate",[t._v("Send all cron output to e-mail")])],1)],1),t._v(" "),a("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("cron job","cron jobs",t.checkedJobs.length)},on:{"click:confirm":t.deleteJobs}}),t._v(" "),a("ui-dialog",{attrs:{id:"SEND_TO_EMAIL"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Set E-mail")]),t._v(" "),a("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("E-mail")]),t._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Valid values are an E-mail address, your DA username: admin, or a blank field to prevent any e-mail.\n            ")]),t._v(" "),a("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.saveEmail(e):null}},slot:"content",model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:t.saveEmail},slot:"buttons"},[a("translate",[t._v("Save")])],1)],1),t._v(" "),a("ui-dialog",{attrs:{id:"EDIT_CRON_JOB",theme:"safe"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Edit Cron Job")]),t._v(" "),a("template",{slot:"content"},["@reboot"!==t.editableRow.minute?[a("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[a("template",{slot:"title"},[a("translate",[t._v("\n                            Minute\n                        ")]),t._v(" "),a("ui-tooltip",[a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column'}"}]},[a("translate",[t._v("Valid cron time values are the numbers indicated and *.")]),t._v(" "),a("translate",[t._v("You can specifiy exact times using commas to separate them. eg: 1,2,3 (minutes 1,2 and 3) ")]),t._v(" "),a("translate",[t._v("You can specify spans using a dash. eg: 5-7 (minutes 5 to 7) ")]),t._v(" "),a("translate",[t._v("You can specify intervals using a star and a forward slash. eg: */2 (every 2nd minute) ")]),t._v(" "),a("translate",[t._v("You can combine them to create a more precise schedule. eg: 1,5,11-15,30-59/2 (minutes 1, 5, 11 to 15 and every 2nd minute between 30 and 59) ")]),t._v(" "),a("translate",[t._v("Note that there are no spaces ")])],1)])],1),t._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.minute,callback:function(e){t.$set(t.editableRow,"minute",e)},expression:"editableRow.minute"}}),t._v(" "),a("translate",{attrs:{slot:"error:between"},slot:"error:between"},[t._v("\n                        Minute should be a number between 0 and 59 or *\n                    ")])],2),t._v(" "),a("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Hour\n                    ")]),t._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.hour,callback:function(e){t.$set(t.editableRow,"hour",e)},expression:"editableRow.hour"}}),t._v(" "),a("translate",{attrs:{slot:"error:between"},slot:"error:between"},[t._v("\n                        Hour should be a number between 0 and 23 or *\n                    ")])],1),t._v(" "),a("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Day of Month\n                    ")]),t._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.day_of_month,callback:function(e){t.$set(t.editableRow,"day_of_month",e)},expression:"editableRow.day_of_month"}})],1),t._v(" "),a("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Month\n                    ")]),t._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.month,callback:function(e){t.$set(t.editableRow,"month",e)},expression:"editableRow.month"}})],1),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Day of Week\n                    ")]),t._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.day_of_week,callback:function(e){t.$set(t.editableRow,"day_of_week",e)},expression:"editableRow.day_of_week"}})],1)]:t._e(),t._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    Command\n                ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editableRow.command,expression:"editableRow.command"}],attrs:{slot:"content",type:"text"},domProps:{value:t.editableRow.command},on:{input:function(e){e.target.composing||t.$set(t.editableRow,"command",e.target.value)}},slot:"content"})],1)],2),t._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"primary",validateGroup:"modifyCronJob"},on:{click:t.updateJob},slot:"buttons"},[a("translate",[t._v("Save")])],1)],2)],2)},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},2507:function(t,e){}}]);