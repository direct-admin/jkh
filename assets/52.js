(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1229:function(t,e,n){"use strict";n.r(e);var a=n(2177),i=n(1584);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);var o=n(0),l=n(2424),s=n.n(l),u=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);"function"==typeof s.a&&s()(u),e.default=u.exports},1581:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{value:{type:String,required:!0},type:{type:String,required:!0}},methods:{submit:function(){this.$emit("block")}},computed:{input:function(){return"size"===this.type?"input-size":"input-text"},validators:function(){var t={required:!0};return"email"!==this.type&&"domain"!==this.type||(t[this.type]=!0),t}},watch:{type:function(){this.$emit("input","")}}}},1582:function(t,e,n){"use strict";n.r(e);var a=n(1581),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=i.a},1583:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(n(11)),i=s(n(10)),r=s(n(3)),o=n(7),l=s(n(2425));function s(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)({},(0,o.preload)("GET_EMAIL_FILTERS"),{components:{FilterInput:l.default},data:function(){return{add:{type:"email",value:""},adult:!1,action:"drop",checkedRows:[],showAddFilter:!0}},computed:(0,r.default)({},(0,o.mapResponse)({GET_EMAIL_FILTERS:"filters"}),{checkedFilters:function(){var t=this;return this.checkedRows.map(function(e){return t.filters.rows.indexOf(e)})}}),created:function(){var t=this;this.adult=this.filters.options.adult,this.action=this.filters.options.action,this.$watch("adult",this.updateAdult),this.$watch("action",this.updateAction),this.$watch("add.type",function(){t.add.value=""})},watch:{$domain:function(){this.reloadFilters()}},methods:{reloadFilters:function(){this.$request("GET_EMAIL_FILTERS"),this.checkedRows=[]},updateAdult:function(){this.$actionRequest("SET_EMAIL_FILTER_ADULT_OPTION",{enabled:this.adult})},updateAction:function(){this.$actionRequest("SET_EMAIL_FILTER_ACTION_OPTION",{value:this.action})},addFilter:function(){var t=this;return(0,i.default)(a.default.mark(function e(){var n,i,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.showAddFilter=!1,t.$nextTick(function(){t.showAddFilter=!0}),n=t.add.value,i=t.add.type,n=n.toString(),"email"===t.add.type?n=t.$p6e.email2ascii(n):"size"===t.add.type&&(n+="B"),e.next=8,t.$actionRequest("CREATE_EMAIL_FILTER",{type:t.add.type,value:n},{reset:!0});case 8:if(!e.sent){e.next=16;break}if("size"!==i){e.next=15;break}if(!(r=t.filters.rows.filter(function(t){return"size"===t.type})).length){e.next=15;break}return e.next=15,t.$request("DELETE_EMAIL_FILTERS",{select:r.map(function(e){return t.filters.rows.indexOf(e)})});case 15:t.reloadFilters();case 16:case"end":return e.stop()}},e,t)}))()},deleteFilters:function(){var t=this;return(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$actionRequest("DELETE_EMAIL_FILTERS",{select:t.checkedFilters});case 2:e.sent&&(t.checkedRows=[],t.reloadFilters());case 4:case"end":return e.stop()}},e,t)}))()}}})},1584:function(t,e,n){"use strict";n.r(e);var a=n(1583),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=i.a},2126:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-form-element",t._b({key:t.type,attrs:{vertical:"",group:"filterInput"}},"ui-form-element",{validators:t.validators},!1),[n("ui-input-group",{attrs:{slot:"content"},slot:"content"},[n(t.input,{key:t.type,ref:"input",tag:"component",attrs:{slot:"input",value:t.value,units:"KB"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submit(e):null},input:function(e){t.$emit("input",e)}},slot:"input"}),t._v(" "),n("ui-button",{attrs:{slot:"additions:right",theme:"safe",validateGroup:"filterInput"},on:{click:t.submit},slot:"additions:right"},[n("translate",[t._v("Block")])],1)],1),t._v(" "),n("translate",{attrs:{slot:"error:email"},slot:"error:email"},[t._v("Should be valid email")]),t._v(" "),n("translate",{attrs:{slot:"error:domain"},slot:"error:domain"},[t._v("Should be valid domain")])],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},2177:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",[n("ui-table",t._b({attrs:{checkedRows:t.checkedRows,editable:!1},on:{"update:checkedRows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:type",fn:function(e){var a=e.type;return[n("translate","email"===a?[t._v("\n                    E-mail\n                ")]:"domain"===a?[t._v("\n                    Domain\n                ")]:"word"===a?[t._v("\n                    Stop word\n                ")]:[t._v("\n                    Size\n                ")])]}},{key:"col:value",fn:function(e){var n=e.value,a=e.item;return["size"===a.type?[t._v("\n                    "+t._s(t._f("humanReadableSize")(n))+"\n                ")]:"email"===a.type?[t._v("\n                    "+t._s(t._f("p6e-unicode-email")(n))+"\n                ")]:[t._v("\n                    "+t._s(n)+"\n                ")]]}}])},"ui-table",{rows:t.filters.rows,columns:[{id:"type",label:t.$gettext("Block By"),width:"200px"},{id:"value",label:t.$gettext("Value"),grow:!0}],rowsCount:t.filters.rows.length,isCheckable:!0,isSortable:!1,verticalLayout:t.$_Client.isPhone},!1),[n("template",{slot:"table:actions"},[n("ui-table-action",{on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[t._v("Delete")])],1)],1),t._v(" "),n("ui-form-element",{attrs:{slot:"col:after:type",vertical:""},slot:"col:after:type"},[n("input-usual-select",{attrs:{slot:"content",options:{email:t.$gettext("E-mail"),domain:t.$gettext("Domain"),word:t.$gettext("Stop word"),size:t.$gettext("Size")}},slot:"content",model:{value:t.add.type,callback:function(e){t.$set(t.add,"type",e)},expression:"add.type"}},[n("ui-tooltip",{attrs:{slot:"additions:right"},slot:"additions:right"},[n("ui-button",{attrs:{slot:"trigger"},slot:"trigger"},[n("ui-icon",{attrs:{id:"question",theme:"primary",size:"medium3"}})],1),t._v(" "),"email"===t.add.type?n("translate",[t._v("\n                            Block a specific E-mail address\n                        ")]):"domain"===t.add.type?n("translate",[t._v("\n                            Block mail from an entire domain\n                        ")]):"word"===t.add.type?n("translate",[t._v("\n                            Block all e-mails containing stop words\n                        ")]):n("translate",[t._v("\n                            Block all e-mails larger than (KB)\n                        ")])],1)],1)],1),t._v(" "),t.showAddFilter?n("filter-input",{attrs:{slot:"col:after:value",type:t.add.type},on:{block:t.addFilter},slot:"col:after:value",model:{value:t.add.value,callback:function(e){t.$set(t.add,"value",e)},expression:"add.value"}}):t._e()],2)],1),t._v(" "),n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[t._v("Options")]),t._v(" "),n("ui-form-element",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],attrs:{slot:"title"},slot:"title"},[n("translate",[t._v("Adult Filter:")]),t._v(" "),n("ui-tooltip",[n("translate",[t._v("Blocks out common adult phrases, words, and addresses")])],1)],1),t._v(" "),n("input-check",{attrs:{slot:"content"},slot:"content",model:{value:t.adult,callback:function(e){t.adult=e},expression:"adult"}},[t.adult?n("translate",[t._v("Enabled")]):n("translate",[t._v("Disabled")])],1)],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Action for filter matches:\n            ")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:t.$_Client.isPhone?"start":"center",dir:t.$_Client.isPhone?"column":"row"},expression:"{\n                    cross: $_Client.isPhone\n                        ? 'start'\n                        : 'center',\n                    dir: $_Client.isPhone\n                        ? 'column'\n                        : 'row',\n                }"},{name:"gutter",rawName:"v-gutter",value:[0,1],expression:"[0, 1]"}],attrs:{slot:"content"},slot:"content"},[n("input-check",{attrs:{type:"radio",value:"drop"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[n("translate",[t._v("Drop E-mail")])],1),t._v(" "),n("input-check",{attrs:{type:"radio",value:"email"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[n("translate",[t._v("Send to spambox")])],1)],1)],1)],1),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("filter","filters",t.checkedRows.length)},on:{"click:confirm":t.deleteFilters}})],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},2424:function(t,e){},2425:function(t,e,n){"use strict";n.r(e);var a=n(2126),i=n(1582);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);var o=n(0),l=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);e.default=l.exports}}]);